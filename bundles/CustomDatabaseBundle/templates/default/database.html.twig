<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Database Interface</title>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-pprn3073KE6tl6lEQgkaIsuaI6ZnI/4eEbsrNRv9+nnl7UMzVf91p+ekQ3CeX9gF" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhG81rKrKrBr/J6f3Lv8eDlhEpX/1z6K3PONi9W8m4Llb5EM26VJoK27HM" crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ asset('bundles/customdatabase/static/database/style.css') }}" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head> 
<body>
    
    <div class="container-fluid">
        <div class="main-layout">
            <!-- Sidebar -->
            <nav id="sidebar" class="sidebar-container d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Database Tables</span>
                    </h6>
                    <div class="px-3 mb-3">
                        <input type="text" id="tableSearch" class="form-control" placeholder="Search tables...">
                    </div>
                    <ul class="nav flex-column" id="tablesList">
                        {% for option in tables %}
                            {% set tableName = option|first %}
                            <li class="nav-item table-item" data-table="{{ tableName }}">
                                <a class="nav-link table-link" href="#" data-table="{{ tableName }}">
                                    <i class="fas fa-table"></i>
                                    {{ tableName | replace({'_': ' '}) | capitalize }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </nav>
            
            <!-- Main Content -->
            <main class="main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Database Explorer</h1>
                </div>
                
                <!-- Table Info Section -->
                <div id="tableInfo" class="mb-4">
                    <h3 id="selectedTableName">Select a table from the sidebar</h3>
                    <div id="strucher"></div>
                </div>

                
                <!-- Table Structure Section -->
                <div id="tableStructureSection" class="mb-4" style="display: none;">
                    <div id="tableStructure"></div>
                </div>

                <!-- Table Fielter Section -->
                <div id="tableFielterSection" class="mb-4" style="display: none;">
                    <div id="tableFielter">
                        <div id="interfaceContainer">
                            <div id="ruleContainer"></div>
                            <button id="addRuleButton">Add Group</button>
                            <button id="saveAllButton">Show Data</button>
                        </div>
                    </div>
                </div>

                <div id="popup" class="popup">
                    <p id="popupMessage"></p>
                    <button id="closePopup">Close</button>
                </div>
                
                <!-- Table Data Section -->
                <div id="tableDataSection" class="mb-4" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4>Table Data</h4>
                        <div>
                            <label for="rowsPerPage">Rows per page:</label>
                            <select id="rowsPerPage" class="form-control d-inline w-auto">
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="200">200</option>
                            </select>
                        </div>
                    </div>
                    <div id="tableData"></div>
                </div>
            </main>
        </div>
    </div>
    
    <script src="{{ asset('bundles/customdatabase/static/database/script.js') }}"></script>
</body>
</html>
