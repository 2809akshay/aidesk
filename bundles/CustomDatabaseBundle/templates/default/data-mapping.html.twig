{% extends '@CustomDatabase/sidebar/sidebar.html.twig' %}

{% block content %}

<div class="main-content">
    <div class="database-connector-content">
        <div class="database-header">
            <div class="header-actions">
                <a href="{{ path('database_connector') }}" class="btn-back">
                    <i class="fas fa-arrow-left"></i> Back to Database Connector
                </a>
            </div>
            <h1><i class="fas fa-project-diagram"></i> Advanced Data Mapping System</h1>
            <p>Map data between different sources and targets with intelligent field matching, transformations, and validation</p>
        </div>

        
            <!-- Top Section: Mapping Overview -->
            <div class="top-section">
                <div class="mapping-overview-section">
                    <h2><i class="fas fa-chart-network"></i> Mapping Overview</h2>
                    <div class="mapping-stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="stat-info">
                                <h4>Source Tables</h4>
                                <div class="stat-value" id="source-tables-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-table"></i>
                            </div>
                            <div class="stat-info">
                                <h4>Target Tables</h4>
                                <div class="stat-value" id="target-tables-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-link"></i>
                            </div>
                            <div class="stat-info">
                                <h4>Mapped Fields</h4>
                                <div class="stat-value" id="mapped-fields-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h4>Validation Status</h4>
                                <div class="stat-value" id="validation-status">Ready</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle Section: Source and Target Configuration -->
            <div class="middle-section">
                <div class="source-target-section">
                    <h2><i class="fas fa-exchange-alt"></i> Source & Target Configuration</h2>
                    <div class="source-target-grid">
                        <!-- Source Configuration -->
                        <div class="source-panel">
                            <h3><i class="fas fa-arrow-right"></i> Source Configuration</h3>
                            <div class="config-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="source-type">Source Type</label>
                                        <select id="source-type">
                                            <option value="database">Database Table</option>
                                            <option value="csv">CSV File</option>
                                            <option value="excel">Excel File</option>
                                            <option value="json">JSON File</option>
                                            <option value="api">API Endpoint</option>
                                            <option value="xml">XML File</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="source-connection">Connection</label>
                                        <select id="source-connection">
                                            <option value="">Select Connection</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="source-table">Source Table/File</label>
                                        <select id="source-table">
                                            <option value="">Select Table</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Target Configuration -->
                        <div class="target-panel">
                            <h3><i class="fas fa-arrow-left"></i> Target Configuration</h3>
                            <div class="config-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="target-type">Target Type</label>
                                        <select id="target-type">
                                            <option value="database">Database Table</option>
                                            <option value="csv">CSV File</option>
                                            <option value="excel">Excel File</option>
                                            <option value="json">JSON File</option>
                                            <option value="api">API Endpoint</option>
                                            <option value="xml">XML File</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="target-connection">Connection</label>
                                        <select id="target-connection">
                                            <option value="">Select Connection</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="target-table">Target Table/File</label>
                                        <select id="target-table">
                                            <option value="">Select Table</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Section: Field Mapping Interface -->
            <div class="bottom-section">
                <div class="mapping-interface-section">
                    <h2><i class="fas fa-sitemap"></i> Field Mapping Interface</h2>

                    <!-- Mapping Controls -->
                    <div class="mapping-controls">
                        <div class="control-group">
                            <button class="btn-auto-map" onclick="autoMapFields()">
                                <i class="fas fa-magic"></i> Auto Map
                            </button>
                            <button class="btn-clear-map" onclick="clearAllMappings()">
                                <i class="fas fa-trash"></i> Clear All
                            </button>
                            <button class="btn-validate-map" onclick="validateMappings()">
                                <i class="fas fa-check-circle"></i> Validate
                            </button>
                        </div>
                        <div class="control-group">
                            <button class="btn-save-mapping" onclick="saveMapping()">
                                <i class="fas fa-save"></i> Save Mapping
                            </button>
                            <button class="btn-load-mapping" onclick="loadMapping()">
                                <i class="fas fa-folder-open"></i> Load Mapping
                            </button>
                        </div>
                    </div>

                    <!-- Field Mapping Grid -->
                    <div class="field-mapping-container">
                        <div class="mapping-header">
                            <div class="source-header">
                                <h4>Source Fields</h4>
                                <span class="field-count" id="source-field-count">0 fields</span>
                            </div>
                            <div class="mapping-header-center">
                                <h4>Field Mappings</h4>
                                <div class="mapping-stats">
                                    <span class="mapped-count" id="mapped-count">0</span> /
                                    <span class="total-count" id="total-count">0</span> mapped
                                </div>
                            </div>
                            <div class="target-header">
                                <h4>Target Fields</h4>
                                <span class="field-count" id="target-field-count">0 fields</span>
                            </div>
                        </div>

                        <div class="field-mapping-grid" id="field-mapping-grid">
                            <!-- Field mappings will be loaded dynamically -->
                        </div>
                    </div>

                    <!-- Mapping Actions -->
                    <div class="mapping-actions">
                        <button class="btn-test-mapping" onclick="testMapping()">
                            <i class="fas fa-play"></i> Test Mapping
                        </button>
                        <button class="btn-execute-mapping" onclick="executeMapping()">
                            <i class="fas fa-rocket"></i> Execute Mapping
                        </button>
                        <button class="btn-schedule-mapping" onclick="scheduleMapping()">
                            <i class="fas fa-clock"></i> Schedule Mapping
                        </button>
                    </div>
                </div>
            </div>

            <!-- Advanced Features Section -->
            <div class="advanced-features-section">
                <h2><i class="fas fa-cogs"></i> Advanced Mapping Features</h2>
                <div class="advanced-features-grid">
                    <!-- Transformations -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h4>Data Transformations</h4>
                        <p>Apply transformations, calculations, and data cleansing</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openTransformations()">
                                Configure
                            </button>
                        </div>
                    </div>

                    <!-- Validation Rules -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Validation Rules</h4>
                        <p>Set up data validation and quality checks</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openValidationRules()">
                                Configure
                            </button>
                        </div>
                    </div>

                    <!-- Lookup Tables -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4>Lookup Tables</h4>
                        <p>Use reference tables for data enrichment</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openLookupTables()">
                                Configure
                            </button>
                        </div>
                    </div>

                    <!-- Error Handling -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4>Error Handling</h4>
                        <p>Configure error handling and recovery options</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openErrorHandling()">
                                Configure
                            </button>
                        </div>
                    </div>

                    <!-- Performance Settings -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <h4>Performance</h4>
                        <p>Optimize mapping performance and batch processing</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openPerformanceSettings()">
                                Configure
                            </button>
                        </div>
                    </div>

                    <!-- Monitoring & Logging -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>Monitoring</h4>
                        <p>Track mapping progress and performance metrics</p>
                        <div class="feature-controls">
                            <button class="btn-feature" onclick="openMonitoring()">
                                View
                            </button>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>

    </div>
</div>
    <script src="{{ asset('bundles/customdatabase/static/mapping/script.js') }}"></script>
{% endblock %}